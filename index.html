<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>NATER HUB ACADEMY | Official Portal</title>
    
    <script src="https://unpkg.com/backendless/dist/backendless.min.js"></script>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@300;400;600;800&display=swap" rel="stylesheet">

    <style>
        :root { 
            --brand-red: #d32f2f; 
            --brand-dark: #b71c1c; 
            --owner-gold: #FFD700;
            --bg-color: radial-gradient(circle at top, #b71c1c 0%, #000000 100%);
            --whatsapp-green: #25D366;
        }

        body, html {
            margin: 0; padding: 0;
            font-family: 'Plus Jakarta Sans', sans-serif;
            background: var(--bg-color);
            background-attachment: fixed;
            min-height: 100vh;
            display: flex; 
            justify-content: center;
            align-items: center; 
            padding: 20px 0;
            overflow-y: auto; 
        }

        /* --- CIRCULAR FLOATING CONTACT BOARD --- */
        .contact-wrapper {
            position: fixed;
            bottom: 25px;
            right: 25px;
            z-index: 2000;
            display: flex;
            flex-direction: column;
            align-items: flex-end;
        }

        .contact-board {
            background: rgba(255, 255, 255, 0.98);
            padding: 18px 22px;
            border-radius: 24px;
            box-shadow: 0 15px 35px rgba(0,0,0,0.4);
            border-bottom: 5px solid var(--owner-gold);
            backdrop-filter: blur(10px);
            margin-bottom: 15px;
            display: none; 
            animation: slideUp 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            width: 280px;
        }

        .contact-circle {
            width: 60px;
            height: 60px;
            background: var(--brand-red);
            color: white;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 24px;
            cursor: pointer;
            box-shadow: 0 10px 20px rgba(0,0,0,0.3);
            transition: 0.3s;
            border: 3px solid white;
        }
        .contact-circle:hover { transform: scale(1.1); background: var(--brand-dark); }

        .contact-board h6 { font-weight: 800; font-size: 11px; margin-bottom: 12px; color: #666; text-transform: uppercase; letter-spacing: 1px; }
        .contact-item { font-size: 13px; font-weight: 700; color: #222; margin: 8px 0; display: flex; align-items: center; text-decoration: none; transition: 0.2s; }
        .contact-item i { width: 24px; font-size: 16px; margin-right: 10px; }
        .icon-mail { color: var(--brand-red); }
        .icon-phone { color: #444; }
        .icon-whatsapp { color: var(--whatsapp-green); font-size: 18px !important; }
        .contact-item:hover { transform: translateX(5px); color: var(--brand-red); }

        @keyframes slideUp { from { transform: translateY(20px); opacity: 0; } to { transform: translateY(0); opacity: 1; } }

        .auth-container { width: 95%; max-width: 1100px; z-index: 10; }
        .auth-card { background: rgba(255, 255, 255, 0.98); border-radius: 30px; overflow: hidden; display: flex; box-shadow: 0 40px 80px rgba(0,0,0,0.7); border: 1px solid rgba(255,255,255,0.1); min-height: 750px; }
        .brand-panel { flex: 1; background: linear-gradient(135deg, #b71c1c 0%, #330000 100%); padding: 80px 50px; display: flex; flex-direction: column; align-items: center; justify-content: center; color: white; text-align: center; border-right: 6px solid var(--owner-gold); }
        .form-panel { flex: 1.3; padding: 60px 80px; background: white; display: flex; flex-direction: column; justify-content: center; }
        
        @media (max-width: 850px) {
            .auth-card { flex-direction: column; min-height: auto; }
            .brand-panel { padding: 40px 20px; border-right: none; border-bottom: 6px solid var(--owner-gold); }
            .form-panel { padding: 40px 25px; }
            body { align-items: flex-start; padding-top: 20px; }
        }

        .password-wrapper { position: relative; }
        .toggle-password { position: absolute; right: 15px; top: 45px; cursor: pointer; color: #888; z-index: 10; }
        .profile-container { width: 130px; height: 130px; border-radius: 50%; border: 5px solid var(--owner-gold); overflow: hidden; margin-bottom: 25px; box-shadow: 0 15px 30px rgba(0,0,0,0.4); }
        .profile-container img { width: 100%; height: 100%; object-fit: cover; }
        .dynamic-msg { background: #fff5f5; color: #b71c1c; font-size: 14px; font-weight: 700; padding: 15px; border-radius: 12px; margin-bottom: 40px; text-align: center; border: 1px solid rgba(183, 28, 28, 0.2); }
        .form-label { font-size: 12px; font-weight: 800; color: #444; text-transform: uppercase; margin-bottom: 10px; display: block; }
        .form-control { border-radius: 12px; padding: 16px 20px; border: 1px solid #ddd; background: #fdfdfd; font-size: 16px; margin-bottom: 25px; transition: 0.3s; }
        .btn-auth { background: var(--brand-red); color: white; font-weight: 800; padding: 18px; border-radius: 12px; border: none; width: 100%; text-transform: uppercase; letter-spacing: 1.5px; transition: 0.3s; box-shadow: 0 10px 25px rgba(183, 28, 28, 0.3); font-size: 16px; }
        .btn-auth:hover { background: #000; transform: translateY(-3px); }
        .text-link { color: var(--brand-red); font-weight: 700; cursor: pointer; font-size: 14px; text-decoration: none; }
        footer { font-size: 11px; margin-top: 40px; opacity: 0.6; text-align: center; font-weight: bold; color: #555; }
        #broadcastImg { width: 100%; border-radius: 12px; margin-bottom: 40px; border: 1px solid #eee; display: none; }
    </style>
</head>
<body>

    <div class="contact-wrapper">
        <div class="contact-board" id="contactBoard">
            <h6>Direct Access</h6>
            <a href="https://wa.me/2348160979620" target="_blank" class="contact-item">
                <i class="fab fa-whatsapp icon-whatsapp"></i> Chat on WhatsApp
            </a>
            <a href="mailto:nmbashaua@gmail.com" class="contact-item">
                <i class="fas fa-envelope icon-mail"></i> nmbashaua@gmail.com
            </a>
            <a href="tel:08160979620" class="contact-item">
                <i class="fas fa-phone-alt icon-phone"></i> 08160979620
            </a>
        </div>
        <div class="contact-circle" onclick="toggleContact()">
            <i class="fas fa-headset" id="contactIcon"></i>
        </div>
    </div>

    <div class="auth-container">
        <div class="auth-card">
            <div class="brand-panel">
                <div class="profile-container"><img id="ownerImg" src="https://via.placeholder.com/130" alt="Admin"></div>
                <h1 class="fw-bold mb-2">NATER HUB ACADEMY</h1>
                <p class="opacity-75 mb-5 fs-5">Official Global Production Portal</p>
                <div class="badge bg-warning text-dark px-4 py-3 rounded-pill" style="font-size: 12px; font-weight: 800;">
                    <i class="fas fa-lock me-2"></i> SECURE AUTHENTICATION
                </div>
            </div>

            <div class="form-panel">
                <div id="ownerStatusMsg" class="dynamic-msg">Authenticate to access your dashboard.</div>
                <img id="broadcastImg" src="" alt="Announcement">

                <div id="loginForm">
                    <label class="form-label">Email Address</label>
                    <input type="email" id="loginEmail" class="form-control" placeholder="yourname@student.com">
                    <div class="password-wrapper">
                        <label class="form-label">Password</label>
                        <input type="password" id="loginPass" class="form-control" placeholder="â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢">
                        <i class="fas fa-eye toggle-password" onclick="togglePasswordVisibility('loginPass')"></i>
                    </div>
                    <div class="d-flex justify-content-between mb-4">
                        <span class="text-link" onclick="toggleForm('register')">Create Account</span>
                        <span class="text-link" onclick="toggleForm('forgot')">Forgot Password?</span>
                    </div>
                    <button class="btn-auth" id="loginBtn" onclick="handleLogin()">Sign In to Dashboard</button>
                </div>

                <div id="registerForm" style="display:none;">
                    <label class="form-label">Full Name</label>
                    <input type="text" id="regName" class="form-control" placeholder="John Doe">
                    <label class="form-label">Email Address</label>
                    <input type="email" id="regEmail" class="form-control" placeholder="email@student.com">
                    <div class="password-wrapper">
                        <label class="form-label">Create Password</label>
                        <input type="password" id="regPass" class="form-control" placeholder="â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢">
                        <i class="fas fa-eye toggle-password" onclick="togglePasswordVisibility('regPass')"></i>
                    </div>
                    <button class="btn-auth" id="regBtn" onclick="handleRegister()">Register Account</button>
                    <div class="text-center mt-4"><span class="text-link" onclick="toggleForm('login')">Back to Login</span></div>
                </div>

                <div id="forgotForm" style="display:none;">
                    <label class="form-label">Recovery Email</label>
                    <input type="email" id="forgotEmail" class="form-control" placeholder="Enter your email address">
                    <button class="btn-auth" onclick="handleReset()">Send Recovery Link</button>
                    <div class="text-center mt-4"><span class="text-link" onclick="toggleForm('login')">Back to Login</span></div>
                </div>

                <footer>&copy; <span id="currentYear"></span> NATER HUB ACADEMY â€¢ SECURE ACCESS</footer>
            </div>
        </div>
    </div>

<script>
    const APP_ID = 'F3BC0BA0-2B86-4D32-8828-DDFED2BD7EAF';
    const JS_KEY = 'F8C339CE-AB50-4F68-83BD-0A73BF97AEDB';

    function handleFriendlyError(e) {
        console.error("System Error:", e);
        if (e.code === 400 || e.code === 14005 || e.message.includes("limit") || e.message.includes("per day")) {
            alert("ðŸŒŸ [Notice]: The portal is currently very busy. Please try again in a few minutes!");
        } else if (e.code === 3033) {
            alert("This email is already registered.");
        } else if (e.code === 3010 || e.code === 3012) {
            alert("Invalid login details.");
        } else {
            alert("Notification: " + e.message);
        }
    }

    async function initApp() {
        try {
            Backendless.serverURL = "https://api.backendless.com";
            Backendless.initApp(APP_ID, JS_KEY);
            await fetchPortalConfig();
        } catch (e) {
            try {
                Backendless.serverURL = "https://eu-api.backendless.com";
                Backendless.initApp(APP_ID, JS_KEY);
                await fetchPortalConfig();
            } catch (err) { handleFriendlyError(err); }
        }
    }

    async function handleLogin() {
        const email = document.getElementById('loginEmail').value;
        const pass = document.getElementById('loginPass').value;
        const btn = document.getElementById('loginBtn');
        if(!email || !pass) return alert("Please fill in all fields.");
        btn.disabled = true; btn.innerText = "Verifying...";
        try {
            await Backendless.UserService.login(email, pass, true);
            window.location.href = 'dashboard.html';
        } catch(e) { 
            handleFriendlyError(e);
            btn.disabled = false; btn.innerText = "Sign In to Dashboard";
        }
    }

    async function handleRegister() {
        const name = document.getElementById('regName').value;
        const email = document.getElementById('regEmail').value;
        const pass = document.getElementById('regPass').value;
        const btn = document.getElementById('regBtn');
        if(!name || !email || !pass) return alert("Fill all fields.");
        btn.disabled = true; btn.innerText = "Creating...";
        try {
            const user = new Backendless.User();
            user.email = email; user.password = pass; user.name = name;
            await Backendless.UserService.register(user);
            alert("Registration successful! Please verify your email.");
            toggleForm('login');
        } catch(e) { handleFriendlyError(e); btn.disabled = false; btn.innerText = "Register Account"; }
    }

    async function handleReset() {
        const email = document.getElementById('forgotEmail').value;
        if(!email) return alert("Enter email");
        try { await Backendless.UserService.restorePassword(email); alert("Reset link sent!"); toggleForm('login'); } catch(e) { handleFriendlyError(e); }
    }

    async function fetchPortalConfig() {
        try {
            const config = await Backendless.Data.of("PortalSettings").findFirst();
            if(config) {
                if(config.profileImageUrl) document.getElementById('ownerImg').src = config.profileImageUrl;
                if(config.postImageUrl) {
                    document.getElementById('broadcastImg').src = config.postImageUrl;
                    document.getElementById('broadcastImg').style.display = 'block';
                    document.getElementById('ownerStatusMsg').style.display = 'none';
                } else if(config.message) {
                    document.getElementById('ownerStatusMsg').innerText = config.message;
                }
            }
        } catch (e) {}
    }

    function toggleContact() {
        const board = document.getElementById('contactBoard');
        const icon = document.getElementById('contactIcon');
        const isVisible = board.style.display === 'block';
        board.style.display = isVisible ? 'none' : 'block';
        icon.className = isVisible ? 'fas fa-headset' : 'fas fa-times';
    }

    function togglePasswordVisibility(id) {
        const x = document.getElementById(id);
        x.type = x.type === "password" ? "text" : "password";
    }

    function toggleForm(type) {
        document.getElementById('loginForm').style.display = type === 'login' ? 'block' : 'none';
        document.getElementById('registerForm').style.display = type === 'register' ? 'block' : 'none';
        document.getElementById('forgotForm').style.display = type === 'forgot' ? 'block' : 'none';
    }

    document.getElementById('currentYear').innerText = new Date().getFullYear();
    window.onload = initApp;
</script>
</body>
</html>
